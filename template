#!/bin/bash
# template - Generic app template

# Use first parameter or auto-detect app name
if [ -n "$1" ]; then
    APP_NAME="$1"
elif d_ex ".git"; then
    APP_NAME=$(g_repo)
else
    APP_NAME=$(p_name "$(pwd)")
fi
# Copy the main script structure
cat > "$APP_NAME" << EOF
#!/bin/bash
# App configuration
APP=\${APP:-${APP_NAME}}

# Import all libraries
if [ -f "\$(dirname "\$0")/\${APP}-lib/struct" ]; then
    . "\$(dirname "\$0")/\${APP}-lib/struct"
else
    . "\$(dirname "\$0")/lib/struct"
fi

# Main app function - customize this part
${APP_NAME}() {
    # Your app logic here
    echo "Running \$APP"
}

# Call the function with script name
\$APP "\$@"
EOF

f_exec "$APP_NAME"
echo "Created executable: $APP_NAME"